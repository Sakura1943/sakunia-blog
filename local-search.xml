<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>TypeScript配置文件模板</title>
    <link href="/2022/08/06/TypeScriptConfigurationTemplate/"/>
    <url>/2022/08/06/TypeScriptConfigurationTemplate/</url>
    
    <content type="html"><![CDATA[<h3 id="Configuration-controllers-ts"><a href="#Configuration-controllers-ts" class="headerlink" title="Configuration.controllers.ts"></a>Configuration.controllers.ts</h3><figure class="highlight typescript"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;<br>  readFileSync,<br>  existsSync,<br>  mkdirSync<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span><br><span class="hljs-keyword">import</span> &#123; join &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span><br><br><span class="hljs-keyword">const</span> CONFIG_FOLDER: <span class="hljs-built_in">string</span> = join(__dirname, <span class="hljs-string">&#x27;../config&#x27;</span>)<br><span class="hljs-keyword">const</span> CONFIG_FILE: <span class="hljs-built_in">string</span> = join(CONFIG_FOLDER, <span class="hljs-string">&#x27;./basic.json&#x27;</span>)<br><br><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConfigurationController</span> </span>&#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params"></span>)</span> &#123;&#125;<br>  <span class="hljs-keyword">public</span> Initialize(): Configuration &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.readConfigurationFile() === <span class="hljs-literal">undefined</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Configuration file is not defined! (path: <span class="hljs-subst">$&#123;CONFIG_FILE&#125;</span>)`</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.readConfigurationFile() <span class="hljs-keyword">as</span> Configuration<br>  &#125;<br>  <span class="hljs-keyword">private</span> configurationFolderExists(): <span class="hljs-built_in">boolean</span> &#123;<br>    <span class="hljs-keyword">if</span> (!existsSync(CONFIG_FOLDER)) &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        mkdirSync(CONFIG_FILE)<br>      &#125; <span class="hljs-keyword">catch</span> (err) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(err <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>)<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125;<br>  <span class="hljs-keyword">private</span> configurationFileExists(): <span class="hljs-built_in">boolean</span> &#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.configurationFolderExists()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Configuration folder is not exists! (path: <span class="hljs-subst">$&#123;CONFIG_FOLDER&#125;</span>)`</span>)<br>    <span class="hljs-keyword">if</span> (!existsSync(CONFIG_FILE)) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">`Configuration file is not exists. (path: <span class="hljs-subst">$&#123;CONFIG_FILE&#125;</span>)`</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125;<br>  <span class="hljs-keyword">private</span> readConfigurationFile(): Configuration | <span class="hljs-literal">undefined</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.configurationFileExists() ? <span class="hljs-built_in">JSON</span>.parse(readFileSync(CONFIG_FILE).toString()) : <span class="hljs-literal">undefined</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;&#125;<br></code></pre></td></tr></table></figure><h3 id="index-d-ts"><a href="#index-d-ts" class="headerlink" title="index.d.ts"></a>index.d.ts</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">type</span> Configuration = &#123;<br>  <span class="hljs-attr">port</span>: <span class="hljs-built_in">number</span>;<br>  host?: <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>TypeScript</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Typescript</tag>
      
      <tag>Template</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>通过画师 id 下载图片到本地</title>
    <link href="/2022/04/23/pixiv-images-download-with-painter-id/"/>
    <url>/2022/04/23/pixiv-images-download-with-painter-id/</url>
    
    <content type="html"><![CDATA[<h1 id="pixiv-图片下载服务"><a href="#pixiv-图片下载服务" class="headerlink" title="pixiv 图片下载服务"></a>pixiv 图片下载服务</h1><blockquote><p>(仅使用画师<code>id</code>进行下载)</p></blockquote><h2 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h2><p>该项目由 <a href="https://rainchan.win/">RainChain</a> 提供的接口进行进一步封装<br>提供了将对应画师<code>id</code>的前30张图片下载本地的服务<br>源API接口作者接口文档地址 <a href="https://api.hcyacg.com/">https://api.hcyacg.com</a></p><h2 id="二、接口信息"><a href="#二、接口信息" class="headerlink" title="二、接口信息"></a>二、接口信息</h2><table><thead><tr><th>接口地址</th><th>接口参数</th><th>参数类型</th><th>参数描述</th></tr></thead><tbody><tr><td><code>http://localhost:3000/down</code></td><td><code>uid</code></td><td><code>GET</code></td><td>传入画师<code>uid</code>, 在后台下载， 并返回存储地址</td></tr><tr><td><code>http://localhost:3000/get/list</code></td><td><code>uid</code>(<code>type</code>为<code>once</code>下使用) &amp; <code>type</code></td><td><code>GET</code></td><td>传入<code>type</code>=<code>once</code>时, 传入画师<code>uid</code>, 并返回存在的图片列表; 传入<code>type</code>=<code>all</code>时, 获得所有已下载的画师作品</td></tr><tr><td><code>http://localhost:3000/get/show</code></td><td><code>uid</code> &amp; <code>pid</code></td><td><code>GET</code></td><td><code>uid</code>即画师id, <code>pid</code>即画师作品id(通过<code>get/list</code>接口获得)</td></tr></tbody></table><h2 id="三、使用"><a href="#三、使用" class="headerlink" title="三、使用"></a>三、使用</h2><h3 id="1、克隆该仓库到本地"><a href="#1、克隆该仓库到本地" class="headerlink" title="1、克隆该仓库到本地"></a>1、克隆该仓库到本地</h3><figure class="highlight shell"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs shell">git clone https://github.com/Sakura1943/PixivImagesDownload.git<br></code></pre></td></tr></table></figure><p>若下载较慢， 可以尝试使用<code>github</code>的反向代理进行克隆</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://proxy.sakunia.tk/https://github.com/Sakura1943/PixivImagesDownload.git<br></code></pre></td></tr></table></figure><h3 id="2、编辑config-ini配置文件"><a href="#2、编辑config-ini配置文件" class="headerlink" title="2、编辑config.ini配置文件"></a>2、编辑<code>config.ini</code>配置文件</h3><p>项目配置文件在项目目录下的<code>config/config.ini</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-comment">; 服务地址</span><br><span class="hljs-section">[app]</span><br><span class="hljs-comment">; 服务端口，默认 3000</span><br><span class="hljs-attr">PORT</span>=<span class="hljs-number">3000</span><br><span class="hljs-comment">; 主机地址， 默认 localhost</span><br><span class="hljs-attr">HOST</span>=localhost<br><span class="hljs-comment">; 存储位置</span><br><span class="hljs-section">[img]</span><br><span class="hljs-comment">; 默认， 于项目根目录的 images 文件夹</span><br><span class="hljs-attr">IMAGE_DIR_PATH</span>=images<br></code></pre></td></tr></table></figure><h3 id="3、安装node项目依赖"><a href="#3、安装node项目依赖" class="headerlink" title="3、安装node项目依赖"></a>3、安装<code>node</code>项目依赖</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install<br></code></pre></td></tr></table></figure><h3 id="4、运行"><a href="#4、运行" class="headerlink" title="4、运行"></a>4、运行</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm run dev<br></code></pre></td></tr></table></figure><h3 id="5、调用接口"><a href="#5、调用接口" class="headerlink" title="5、调用接口"></a>5、调用接口</h3><p>下载</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl http://localhost:3000/down?uid=xxxx<br></code></pre></td></tr></table></figure><p>下载完就会提示保存的路径了</p><p>查看列表</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl http://localhost:3000/get/list?type=once&amp;uid=xxx<br>或者<br>curl http://localhost:3000/get/list?type=all<br></code></pre></td></tr></table></figure><p>查看图片</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">浏览器输入地址: http://localhost:3000/get/show?uid=xxx&amp;pid=xxx<br></code></pre></td></tr></table></figure><h2 id="四、开源协议"><a href="#四、开源协议" class="headerlink" title="四、开源协议"></a>四、开源协议</h2><p><a href="https://github.com/Sakura1943/PixivImagesDownload/blob/main/LICENSE">GNU GPLv3</a></p>]]></content>
    
    
    <categories>
      
      <category>Pixiv</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pixiv</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用Render部署Serverless Cloudreve</title>
    <link href="/2022/03/30/render_cloudreve/"/>
    <url>/2022/03/30/render_cloudreve/</url>
    
    <content type="html"><![CDATA[<blockquote><p>准备工作<br>github 账号一个<br>render 账号 <a href="https://dashboard.render.com/">注册</a></p></blockquote><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="1-注册数据库"><a href="#1-注册数据库" class="headerlink" title="1. 注册数据库"></a>1. 注册数据库</h3><p>我这里使用sqlpub注册</p><p>打开 <a href="http://mysql.sqlpub.com/">链接</a><br>按照要求注册完数据库，然后将信息保存起来</p><h3 id="2-打开项目部署"><a href="#2-打开项目部署" class="headerlink" title="2. 打开项目部署"></a>2. 打开项目部署</h3><p>登录render账号:  <a href="https://dashboard.render.com/">https://dashboard.render.com/</a></p><p>打开Github项目链接: <a href="https://github.com/Sakura1943/cloudreve-render">打开链接</a></p><p>点击部署按钮:</p><p><img src="https://bu.dusays.com/2022/03/30/2ff61a44789f9.png" alt="https://bu.dusays.com/2022/03/30/2ff61a44789f9.png"></p><p>填写数据库环境变量</p><p><img src="https://bu.dusays.com/2022/03/30/06e710b722769.png" alt="https://bu.dusays.com/2022/03/30/06e710b722769.png"></p><p>点击apply完成部署</p><p><img src="https://bu.dusays.com/2022/03/30/67a66ea725a18.png" alt="https://bu.dusays.com/2022/03/30/67a66ea725a18.png"></p><h3 id="3-查看初始化密码"><a href="#3-查看初始化密码" class="headerlink" title="3.  查看初始化密码"></a>3.  查看初始化密码</h3><p>点击dashbord跳转到管理面板<br>然后打开项目名</p><p><img src="https://bu.dusays.com/2022/03/30/2e2bd2fa4ae63.png" alt="https://bu.dusays.com/2022/03/30/2e2bd2fa4ae63.png"></p><p>等待初始化完毕得到账号密码</p><p><img src="https://bu.dusays.com/2022/03/30/e6ce0ab7df409.png" alt="https://bu.dusays.com/2022/03/30/e6ce0ab7df409.png"></p><h3 id="4-域名代理"><a href="#4-域名代理" class="headerlink" title="4. 域名代理"></a>4. 域名代理</h3><p>打开你的ns厂商域名解析列表， 如我使用的 <a href="https://dash.cloudflare.com/">CloudFlare</a><br>用CNAME解析一个你想要的域名</p><p><img src="https://bu.dusays.com/2022/03/30/fc77af7bfb2ca.png" alt="https://bu.dusays.com/2022/03/30/fc77af7bfb2ca.png"></p><p>CNAME的值是render提供域名， 如图<br>记得， 如果是cloudlflare, 请不要打开代理功能</p><p><img src="https://bu.dusays.com/2022/03/30/73217d7a47e29.png" alt="https://bu.dusays.com/2022/03/30/73217d7a47e29.png"></p><p>点击添加域名， 将域名填入后应用， 然后等待状态为绿色即可</p><p><img src="https://bu.dusays.com/2022/03/30/d5e19d4737db5.png" alt="https://bu.dusays.com/2022/03/30/d5e19d4737db5.png"></p><h3 id="5-登陆并修改密码"><a href="#5-登陆并修改密码" class="headerlink" title="5.  登陆并修改密码"></a>5.  登陆并修改密码</h3><p>使用你的域名进行访问</p><p><img src="https://bu.dusays.com/2022/03/30/361b672a82d26.png" alt="https://bu.dusays.com/2022/03/30/361b672a82d26.png"><br>邮箱和密码为上面生成的初始化邮箱和密码</p><p>打开设置</p><p><img src="https://bu.dusays.com/2022/03/30/2c4ae979f02aa.png" alt="https://bu.dusays.com/2022/03/30/2c4ae979f02aa.png"></p><p>点击修改密码</p><p><img src="https://bu.dusays.com/2022/03/30/54d5888c484aa.png" alt="https://bu.dusays.com/2022/03/30/54d5888c484aa.png"><br>输入初始化的密码和新密码</p><p><img src="https://bu.dusays.com/2022/03/30/b120760e04a3c.png" alt="https://bu.dusays.com/2022/03/30/b120760e04a3c.png"></p><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2><p>关于 Cloudreve如何绑定存储介质 与 更多玩法<br>详情请看Cloudreve官方文档<br>地址: <a href="https://docs.cloudreve.org/">https://docs.cloudreve.org</a></p><p><img src="https://bu.dusays.com/2022/03/30/b7f824c2e8bf7.png" alt="https://bu.dusays.com/2022/03/30/b7f824c2e8bf7.png"></p>]]></content>
    
    
    <categories>
      
      <category>Cloudreve</category>
      
    </categories>
    
    
    <tags>
      
      <tag>render</tag>
      
      <tag>serverless</tag>
      
      <tag>cloudreve</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>在ArchLinux使用Systemd-nspawn安装Debian(Systemd-boot引导)</title>
    <link href="/2022/02/01/debian-build-from-arch/"/>
    <url>/2022/02/01/debian-build-from-arch/</url>
    
    <content type="html"><![CDATA[<blockquote><p>准备工作:<br>ArchLinux的机器<br>新的硬盘(分区)<br>GPT分区表</p></blockquote><hr><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="1、安装debootstrap"><a href="#1、安装debootstrap" class="headerlink" title="1、安装debootstrap"></a>1、安装debootstrap</h3><p>执行<code>pacman</code>命令安装</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span> <span class="hljs-comment">debootstrap</span><br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/pacman-install.jpg" alt="debootstrap"></p><h3 id="2、创建安装分区"><a href="#2、创建安装分区" class="headerlink" title="2、创建安装分区"></a>2、创建安装分区</h3><p>创建新的分区，用于安装系统</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">fdisk <span class="hljs-regexp">/dev/</span>xxx<br></code></pre></td></tr></table></figure><p><code>EFI</code>分区可与<code>ArchLinux</code>原有EFI分区共用<br>安装分区因人而异，我为了简单，此处只创建一个分区用于整个系统文件的存放<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/disk-part-new.jpg" alt="创建分区"></p><h3 id="3、格式化分区"><a href="#3、格式化分区" class="headerlink" title="3、格式化分区"></a>3、格式化分区</h3><p>将刚创建的分区进行格式化<br>这里我以xfs文件系统为例子，其他文件系统详情请看<a href="https://wiki.archlinux.org/title/File_systems">文件系统介绍</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkfs.xfs <span class="hljs-regexp">/dev/</span>xxx<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/mkfs.jpg" alt="格式化分区"></p><h3 id="4、挂载到本地"><a href="#4、挂载到本地" class="headerlink" title="4、挂载到本地"></a>4、挂载到本地</h3><p>先创建用于挂载的目录</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -p <span class="hljs-regexp">/containers/</span>debian<br></code></pre></td></tr></table></figure><p>挂载硬盘到刚创建的文件夹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mount -t xfs <span class="hljs-regexp">/dev/</span>xxx <span class="hljs-regexp">/containers/</span>debian<br></code></pre></td></tr></table></figure><p>最后检查硬盘是否正确挂载</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">df -<span class="hljs-selector-tag">Th</span><br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/mount.jpg" alt="挂载分区"></p><h3 id="5、拉取系统文件"><a href="#5、拉取系统文件" class="headerlink" title="5、拉取系统文件"></a>5、拉取系统文件</h3><p>这里我选择 <code>bullseye</code> 版本<br>其他版本可在 <a href="https://mirrors.bfsu.edu.cn/debian/dists">这里</a> 查看</p><p>执行以下命令拉取系统</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">debootstrap --include=systemd-container --components=main,universe bullseye <span class="hljs-regexp">/containers/</span>debian https:<span class="hljs-regexp">//mi</span>rrors.bfsu.edu.cn/debian<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/debootstrap.png" alt="拉取镜像"><br>如下图结果即为成功<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/pull-ok.png" alt="成功拉取镜像"></p><h3 id="6、初始化root密码"><a href="#6、初始化root密码" class="headerlink" title="6、初始化root密码"></a>6、初始化root密码</h3><p>执行</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">systemd-nspawn -D <span class="hljs-regexp">/containers/</span>debian<br>passwd root<br>logout<br></code></pre></td></tr></table></figure><p>如图<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/passwd-root.png" alt="设置root密码"><br>尝试进入系统</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">systemd-nspawn -b -D <span class="hljs-regexp">/containers/</span>debian<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/systemd-nspawn-b-D.png" alt="进入系统"><br>如图输入密码成功然后关机即可<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/shutdown.png" alt="尝试登陆"></p><h3 id="7、挂载boot分区"><a href="#7、挂载boot分区" class="headerlink" title="7、挂载boot分区"></a>7、挂载boot分区</h3><p>将ArchLinux的boot绑定于debian中</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mount -o bind <span class="hljs-regexp">/boot /</span>containers<span class="hljs-regexp">/debian/</span>boot<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/bind-boot.png" alt="挂载boot分区"></p><h3 id="8、安装内核"><a href="#8、安装内核" class="headerlink" title="8、安装内核"></a>8、安装内核</h3><p>开机</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">systemd-nspawn -b -D <span class="hljs-regexp">/containers/</span>debian<br></code></pre></td></tr></table></figure><p>查找最新的linux内核和headers</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs excel">apt <span class="hljs-built_in">search</span> linux-image-<br>apt <span class="hljs-built_in">search</span> linux-headers<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/linux-image-search.png" alt="查找linux-image"><br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/linux-header-search.png" alt="查找linux-headers"><br>安装<br>此处我选择我所能查到的最新 <code>linux-image-5.10.0-10-amd64</code> 和 <code>linux-headers-5.10.0-10-amd64</code></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">apt</span> install -y linux-headers-<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">10</span>-amd<span class="hljs-number">64</span> linux-image-<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">10</span>-amd<span class="hljs-number">64</span><br></code></pre></td></tr></table></figure><p>因为我已经安装，不想重复安装，所以就直接放安装完内核的图<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/kernel-install-ok.png" alt="内核存放位置"><br>圈起来的部分即为安装完成的内核和内核模块</p><h3 id="9、安装桌面"><a href="#9、安装桌面" class="headerlink" title="9、安装桌面"></a>9、安装桌面</h3><p>安装tasksel用于自动安装桌面</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">apt <span class="hljs-keyword">install</span> aptitude tasksel<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/tasksel.png" alt="安装tasksel"><br>输入 <code>tasksel</code> 回车开始安装桌面<br>复选框上下移动，空格选择，tab键可切换至ok,ok处回车开始安装<br>我这里举例gnome桌面，顺便安装ssh服务用于远程连接<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/desktop-installation.png" alt="安装gnome和ssh"><br>选择键盘，第一个即可<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/keyboard-selection.png" alt="选择美式键盘"><br>结束后打开 <code>/etc/pam.d/gdm-password</code><br>将图中圈起来的行加上#号注释<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/gdm-password.png" alt="注销参数"><br><code>/etc.pam.d/gdm-autologin</code>里也一样<br>将开机设置为图形界面</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">systemctl</span> <span class="hljs-built_in">set-default</span> <span class="hljs-string">graphical</span>.<span class="hljs-string">target</span><br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/graphical.png" alt="设置开机以图形启动"></p><h3 id="10、新建用户"><a href="#10、新建用户" class="headerlink" title="10、新建用户"></a>10、新建用户</h3><p>输入useradd命令创建普通用户,这里用户名以sakunia为例</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">useradd -m -s <span class="hljs-regexp">/bin/</span>bash -c sakunia sakunia<br></code></pre></td></tr></table></figure><p>设置密码</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd sakunia</span><br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/useradd.png" alt="创建用户和设置密码"></p><h3 id="11、配置fstab"><a href="#11、配置fstab" class="headerlink" title="11、配置fstab"></a>11、配置fstab</h3><p>现在可以输入 <code>shutdown -h now</code> 进行关机了<br>然后退回archlinux<br>安装<code>arch-install-scripts</code>(我们需要使用其中的genfstab工具)</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span> <span class="hljs-comment">arch</span><span class="hljs-literal">-</span><span class="hljs-comment">install</span><span class="hljs-literal">-</span><span class="hljs-comment">scripts</span><br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/arch-install-scripts-installation.png" alt="安装arch-install-scripts"><br>卸载<code>/containers/debian/boot</code>，运行<code>genfstab</code>生成/etc/fstab文件用于开机挂载硬盘</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">umount <span class="hljs-regexp">/containers/</span>debian/boot<br>genfstab -U <span class="hljs-regexp">/containers/</span>debian &gt; <span class="hljs-regexp">/containers/</span>debian<span class="hljs-regexp">/etc/</span>fstab<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/genfstab.png" alt="生成/etc/fstab"><br>用<code>lsblk</code>查看boot分区路径，用<code>blkid</code>查看efi分区uuid</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">lsblk<br>blkid <span class="hljs-regexp">/dev/</span>sdb1<br></code></pre></td></tr></table></figure><p>记下efi分区的uuid<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/blkid.png" alt="查看efi分区UUID"><br>使用<code>vim</code>打开<code>/containers/debian/etc/fstab</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/containers/</span>debian<span class="hljs-regexp">/etc/</span>fstab<br></code></pre></td></tr></table></figure><p>在最后输入</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">UUID</span>=<span class="hljs-number">7400</span>-E<span class="hljs-number">9</span>F<span class="hljs-number">1</span>      /boot     vfat      rw,relatime,fmask=<span class="hljs-number">0022</span>,dmask=<span class="hljs-number">0022</span>,codepage=<span class="hljs-number">437</span>,iocharset=ascii,shortname=mixed,utf<span class="hljs-number">8</span>,errors=remount-ro<span class="hljs-number">0</span> <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>上面的uuid替换为你刚查找到的efi分区的uuid<br>如图<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/file-fstab.png" alt="使EFI分区开机自动挂载"></p><h3 id="12、添加systemd-boot引导项"><a href="#12、添加systemd-boot引导项" class="headerlink" title="12、添加systemd-boot引导项"></a>12、添加systemd-boot引导项</h3><p>打开你的<code>systemd-boot</code>配置文件夹，我的在<code>/boot/loader/entries</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/boot/</span>loader/entries<br></code></pre></td></tr></table></figure><p>新建一份debian的引导配置文件<br>编写内容如图，关系如下</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">title</span>    标题<br><span class="hljs-attribute">linux</span>    /vmlinuz-<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">10</span>-amd<span class="hljs-number">64</span><br><span class="hljs-attribute">initrd</span>   /initrd.img-<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">10</span>-amd<span class="hljs-number">64</span><br><span class="hljs-attribute">initrd</span>   /config-<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">10</span>-amd<span class="hljs-number">64</span><br><span class="hljs-attribute">initrd</span>   /System.map-<span class="hljs-number">5</span>.<span class="hljs-number">10</span>.<span class="hljs-number">0</span>-<span class="hljs-number">10</span>-amd<span class="hljs-number">64</span><br><span class="hljs-attribute"><span class="hljs-nomarkup">options</span></span>  root=PARTUUID=<span class="hljs-string">&quot;xxx&quot;</span> rw<br></code></pre></td></tr></table></figure><p><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/systemd-boot-config.png"><br><code>partuuid</code>通过blkid查看，查看你根目录挂载的硬盘分区的partuuid</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">blkid <span class="hljs-regexp">/dev/</span>xxx<br></code></pre></td></tr></table></figure><p>填入如图圈起部分数据即可<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/partiiud.png" alt="根目录PARTUUID"></p><h2 id="安装工作完成，重启验证"><a href="#安装工作完成，重启验证" class="headerlink" title="安装工作完成，重启验证"></a>安装工作完成，重启验证</h2><p>输入<code>bootctl list</code>能找到引导项即可重启验证了<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/bootctl-list.png" alt="查看是否加载"><br>重启得到如下界面即可<br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/debian-systemd.png" alt="重启查看是否存在引导项"><br><img src="https://git.sakunia.tk/Sakura1943/imgs/releases/download/imgs/gdm-login.png" alt="进入登陆界面"></p><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
    
    
    <categories>
      
      <category>ArchLinux</category>
      
      <category>systemd</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ArchLinux</tag>
      
      <tag>systemd-boot</tag>
      
      <tag>systemd-nspawn</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linux服务器搭建MineCraft Spigot</title>
    <link href="/2022/01/15/mc-build/"/>
    <url>/2022/01/15/mc-build/</url>
    
    <content type="html"><![CDATA[<blockquote><p>准备:<br>Arch Linux服务器一台<br>Java环境 (java-17-jdk为例子)<br>服务器防火墙开放 <code>25565/TCP</code> 端口</p></blockquote><hr><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="1、添加ArchLinuxCN软件仓库源"><a href="#1、添加ArchLinuxCN软件仓库源" class="headerlink" title="1、添加ArchLinuxCN软件仓库源"></a>1、添加ArchLinuxCN软件仓库源</h3><p>打开 <code>/etc/pacman.conf</code> 文件</p><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>pacman.conf<br></code></pre></td></tr></table></figure><p>在末尾添加</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[archlinuxcn]</span><br><span class="hljs-attr">SigLevel</span> = Never<br><span class="hljs-attr">Server</span> = https://mirrors.bfsu.edu.cn/archlinuxcn/<span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>按<code>:wq!</code>或<code>:x</code>保存并退出</p><h3 id="2、更新软件仓库数据"><a href="#2、更新软件仓库数据" class="headerlink" title="2、更新软件仓库数据"></a>2、更新软件仓库数据</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Syy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span><br></code></pre></td></tr></table></figure><h3 id="3、安装Java环境-java-17-jdk"><a href="#3、安装Java环境-java-17-jdk" class="headerlink" title="3、安装Java环境(java-17-jdk)"></a>3、安装Java环境(java-17-jdk)</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span> <span class="hljs-comment">jdk</span><br></code></pre></td></tr></table></figure><h3 id="4、更换系统默认java环境"><a href="#4、更换系统默认java环境" class="headerlink" title="4、更换系统默认java环境"></a>4、更换系统默认java环境</h3><p>输入</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">archlinux-java status</span><br></code></pre></td></tr></table></figure><p>若出现包含java17的字样，即为安装成功</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">archlinux-<span class="hljs-keyword">java </span>status                  <br>Available <span class="hljs-keyword">Java </span>environments:<br>  <span class="hljs-keyword">java-17-jdk </span>(default)<br></code></pre></td></tr></table></figure><p>若java-17-jdk为<code>default</code>则已成功将java17设置为默认环境<br>若不是，则输入</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">archlinux-java <span class="hljs-builtin-name">set</span> 刚才查出来的java环境名<br></code></pre></td></tr></table></figure><p>后输入<code>archlinux-java</code>查看，若为default,则成功</p><h3 id="5、安装spigot-minecraft的第三方服务端"><a href="#5、安装spigot-minecraft的第三方服务端" class="headerlink" title="5、安装spigot(minecraft的第三方服务端)"></a>5、安装spigot(minecraft的第三方服务端)</h3><p>输入</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">noconfirm</span> --<span class="hljs-comment">needed</span> <span class="hljs-comment">spigot</span><br></code></pre></td></tr></table></figure><p>进行安装</p><h3 id="6、启动服务并添加许可"><a href="#6、启动服务并添加许可" class="headerlink" title="6、启动服务并添加许可"></a>6、启动服务并添加许可</h3><p>安装完成输入</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">systemctl <span class="hljs-literal">start</span> spigot<br></code></pre></td></tr></table></figure><p>可能会出现报错，不要紧，这是因为咱还没更改许可协议<br>打开<code>/srv/craftbukkit/</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/srv/</span>craftbukkit/<br></code></pre></td></tr></table></figure><p>输入</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">vim</span> eula.txt<br></code></pre></td></tr></table></figure><p>将 </p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">eula</span>=<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>改成</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">eula</span>=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>按<code>:wq!</code>或者<code>:x</code>保存并退出<br>重启服务</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart spigot</span><br></code></pre></td></tr></table></figure><p>如果你想服务器开机就能启动Spigot服务，就输入</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">systemctl <span class="hljs-builtin-name">enable</span> spigot<br></code></pre></td></tr></table></figure><h3 id="7、允许非正版授权账户进行登陆"><a href="#7、允许非正版授权账户进行登陆" class="headerlink" title="7、允许非正版授权账户进行登陆"></a>7、允许非正版授权账户进行登陆</h3><p>进入Spigot配置所在文件夹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/srv/</span>craftbukkit<br></code></pre></td></tr></table></figure><p>打开<code>server.properties</code>文件</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">vim <span class="hljs-keyword">server</span>.properties<br></code></pre></td></tr></table></figure><p>将</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">online-mode</span>=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>改为</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">online-mode</span>=<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>按<code>:wq!</code>或者<code>:x</code>保存并退出<br>重启服务</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart spigot</span><br></code></pre></td></tr></table></figure><h3 id="8、添加白名单支持"><a href="#8、添加白名单支持" class="headerlink" title="8、添加白名单支持"></a>8、添加白名单支持</h3><p>进入Spigot配置所在文件夹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/srv/</span>craftbukkit<br></code></pre></td></tr></table></figure><p>打开<code>server.properties</code>文件</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">vim <span class="hljs-keyword">server</span>.properties<br></code></pre></td></tr></table></figure><p>将</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">white-list</span>=<span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>改为</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">white-list</span>=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>按<code>:wq!</code>或者<code>:x</code>保存并退出<br>重启服务</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl restart spigot</span><br></code></pre></td></tr></table></figure><p>以sakunia账户为例<br>添加白名单的命令为</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">spigot command whitelist <span class="hljs-builtin-name">add</span> sakunia<br></code></pre></td></tr></table></figure><p>在当前文件夹的<code>whitelist.json</code>即可看见添加的白名单</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json">[<br>  &#123;<br>    <span class="hljs-attr">&quot;uuid&quot;</span>: <span class="hljs-string">&quot;f5d88c8d-7a2a-398e-9a5a-e339813115f4&quot;</span>,<br>    <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;sakunia&quot;</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p>若仍无内容，请手动输入命令重载</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">spigot <span class="hljs-keyword">command</span> whitelist <span class="hljs-keyword">reload</span><br></code></pre></td></tr></table></figure><h3 id="9、op管理员账户添加"><a href="#9、op管理员账户添加" class="headerlink" title="9、op管理员账户添加"></a>9、op管理员账户添加</h3><p>添加op账户的命令为(以sakunia为例)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">spigot <span class="hljs-built_in">command</span> op sakunia<br></code></pre></td></tr></table></figure><p>执行后在<code>/srv/craftbukkit/ops/json</code>即可看到</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">]<br>  &#123;<br>    <span class="hljs-string">&quot;uuid&quot;</span>: <span class="hljs-string">&quot;f5d88c8d-7a2a-398e-9a5a-e339813115f4&quot;</span>,<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;sakunia&quot;</span>,<br>    <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-number">4</span>,<br>    <span class="hljs-string">&quot;bypassesPlayerLimit&quot;</span>: <span class="hljs-literal">false</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p>若无列表，请手动输入命令重载</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">spigot <span class="hljs-keyword">command</span> ops <span class="hljs-keyword">reload</span><br></code></pre></td></tr></table></figure><h3 id="10、防火墙配置"><a href="#10、防火墙配置" class="headerlink" title="10、防火墙配置"></a>10、防火墙配置</h3><p>若服务器使用<code>iptables</code>，则输入</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">iptables -<span class="hljs-selector-tag">A</span> <span class="hljs-selector-tag">INPUT</span> -<span class="hljs-selector-tag">p</span> tcp -m tcp --dport <span class="hljs-number">25565</span> -j ACCEPT<br></code></pre></td></tr></table></figure><p>输入</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">iptables-save &gt; <span class="hljs-regexp">/etc/i</span>ptables/iptables.rules<br></code></pre></td></tr></table></figure><p>以保持下次iptables服务重启时，该端口仍然生效<br>若服务器使用<code>firewalld</code>，则输入</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">firewall-cmd <span class="hljs-params">--add-port=25565/tcp</span> <span class="hljs-params">--permanent</span> <span class="hljs-string">//</span>永久开放tcp 25565端口<br>firewall-cmd <span class="hljs-params">--reload</span> <span class="hljs-string">//</span>重新加载<br></code></pre></td></tr></table></figure><p>若为云计算厂商的云服务器(VPS),则开放厂商提供的防火墙的<code>25565/TCP</code>端口</p><h3 id="11、查看spigot版本-安装MineCraft客户端"><a href="#11、查看spigot版本-安装MineCraft客户端" class="headerlink" title="11、查看spigot版本,安装MineCraft客户端"></a>11、查看spigot版本,安装MineCraft客户端</h3><p>输入</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -Ss spigot</span><br></code></pre></td></tr></table></figure><p>看到</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">archlinuxcn</span>/spigot <span class="hljs-number">1</span>.<span class="hljs-number">18</span>.<span class="hljs-number">1</span>+b<span class="hljs-number">144</span>-<span class="hljs-number">13</span><span class="hljs-meta"> [installed]</span><br></code></pre></td></tr></table></figure><p>则我的MineCraft客户端需要<code>1.18.1</code>版本<br>可通过HMCL客户端下载<br>从下面地址寻找对于系统的安装宝进行安装<br><a href="https://github.com/huanghongxun/HMCL/releases">HMCL客户端</a></p><h2 id="准备完毕"><a href="#准备完毕" class="headerlink" title="准备完毕"></a>准备完毕</h2><p>使用<code>HMCL</code>进行开心的游玩吧，连接地址可为IPV4/V6地址或者域名</p>]]></content>
    
    
    <categories>
      
      <category>MineCraft</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Arch Linux</tag>
      
      <tag>MineCraft</tag>
      
      <tag>Spigot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>代理</title>
    <link href="/2022/01/12/proxy-change/"/>
    <url>/2022/01/12/proxy-change/</url>
    
    <content type="html"><![CDATA[<p><a href="https://proxy.sakunia.tk是我在cloudflare/">https://proxy.sakunia.tk是我在CloudFlare</a> Worker上搭建的反向代理服务<br>主要用于下载国内访问较慢的资源，也可用于代理github的流量，使用git clone</p><blockquote><p>使用方法:<br>在链接前加上<code>https://proxy.sakunia.tk</code>，如</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//</span>proxy.sakunia.tk<span class="hljs-regexp">/https:/</span><span class="hljs-regexp">/github.com/</span>rockchip-linux/kernel.git<br>wget https:<span class="hljs-regexp">//</span>proxy.sakunia.tk<span class="hljs-regexp">/https:/</span><span class="hljs-regexp">/github.com/</span>rockchip-linux<span class="hljs-regexp">/kernel/</span>README<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>PROXY</category>
      
      <category>CloudFlare</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PROXY</tag>
      
      <tag>CloudFlare</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KMS服务器搭建</title>
    <link href="/2021/05/20/kms-server/"/>
    <url>/2021/05/20/kms-server/</url>
    
    <content type="html"><![CDATA[<blockquote><p>准备<br>  1）已安装linux：Debian或CentOS<br>  2) 安装程序</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs awk">git clone https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/dakkidaze/</span>one-key-kms.git<br></code></pre></td></tr></table></figure><p>  建议开代理下载</p><h3 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stata">Debian系：<br>sudo dpkg --add-architecture i386<br>sudo apt <span class="hljs-keyword">update</span><br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">one</span>-key-kms<br>sudo chmod +x <span class="hljs-keyword">one</span>-key-kms-debian.<span class="hljs-keyword">sh</span><br>sudo <span class="hljs-keyword">sh</span> <span class="hljs-keyword">one</span>-key-kms-debian.<span class="hljs-keyword">sh</span><br><br>CentOS系：<br>sudo yum install perl<br><span class="hljs-keyword">cd</span> <span class="hljs-keyword">one</span>-key-kms<br>sudo chmod +x <span class="hljs-keyword">one</span>-key-kms-centos.<span class="hljs-keyword">sh</span><br>sudo <span class="hljs-keyword">sh</span> <span class="hljs-keyword">one</span>-key-kms-centos.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><h3 id="打开1688端口"><a href="#打开1688端口" class="headerlink" title="打开1688端口"></a>打开1688端口</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">iptables -<span class="hljs-selector-tag">I</span> <span class="hljs-selector-tag">INPUT</span> -<span class="hljs-selector-tag">p</span> tcp --dport <span class="hljs-number">1688</span> -j ACCEPT<br>iptables save<br>iptables start<br></code></pre></td></tr></table></figure><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">cd</span> <span class="hljs-keyword">one</span>-key-kms<br>sudo chmod +x kms.<span class="hljs-keyword">sh</span><br>./kms.<span class="hljs-keyword">sh</span><br></code></pre></td></tr></table></figure><h3 id="密钥"><a href="#密钥" class="headerlink" title="密钥"></a>密钥</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">## 操作系统版本   KMS 客户端安装密钥</span><br><span class="hljs-comment">## 其他版本请在 https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys 自行查找</span><br><span class="hljs-attribute">Windows</span> <span class="hljs-number">7</span> 专业版   FJ<span class="hljs-number">82</span>H-XT<span class="hljs-number">6</span>CR-J<span class="hljs-number">8</span>D<span class="hljs-number">7</span>P-XQJJ<span class="hljs-number">2</span>-GPDD<span class="hljs-number">4</span><br><span class="hljs-attribute">Windows</span> <span class="hljs-number">8</span> 专业版   NG<span class="hljs-number">4</span>HW-VH<span class="hljs-number">26</span>C-<span class="hljs-number">733</span>KW-K<span class="hljs-number">6</span>F<span class="hljs-number">98</span>-J<span class="hljs-number">8</span>CK<span class="hljs-number">4</span><br><span class="hljs-attribute">Windows</span> <span class="hljs-number">8</span>.<span class="hljs-number">1</span> 专业版 GCRJD-<span class="hljs-number">8</span>NW<span class="hljs-number">9</span>H-F<span class="hljs-number">2</span>CDX-CCM<span class="hljs-number">8</span>D-<span class="hljs-number">9</span>D<span class="hljs-number">6</span>T<span class="hljs-number">9</span><br><span class="hljs-attribute">Windows</span> <span class="hljs-number">10</span> 专业版  W<span class="hljs-number">269</span>N-WFGWX-YVC<span class="hljs-number">9</span>B-<span class="hljs-number">4</span>J<span class="hljs-number">6</span>C<span class="hljs-number">9</span>-T<span class="hljs-number">83</span>GX<br><br><span class="hljs-comment">## OFFICE 版本   KMS 客户端安装密钥</span><br><span class="hljs-comment">## 其他版本请在 https://docs.microsoft.com/en-us/DeployOffice/vlactivation/gvlks 自行查找</span><br><span class="hljs-attribute">Office</span> Professional Plus <span class="hljs-number">2019</span>      NMMKJ-<span class="hljs-number">6</span>RK<span class="hljs-number">4</span>F-KMJVX-<span class="hljs-number">8</span>D<span class="hljs-number">9</span>MJ-<span class="hljs-number">6</span>MWKP<br><span class="hljs-attribute">Office</span> Standard <span class="hljs-number">2019</span>               <span class="hljs-number">6</span>NWWJ-YQWMR-QKGCB-<span class="hljs-number">6</span>TMB<span class="hljs-number">3</span>-<span class="hljs-number">9</span>D<span class="hljs-number">9</span>HK<br><span class="hljs-attribute">Project</span> Professional <span class="hljs-number">2019</span>          B<span class="hljs-number">4</span>NPR-<span class="hljs-number">3</span>FKK<span class="hljs-number">7</span>-T<span class="hljs-number">2</span>MBV-FRQ<span class="hljs-number">4</span>W-PKD<span class="hljs-number">2</span>B<br><span class="hljs-attribute">Project</span> Standard <span class="hljs-number">2019</span>              C<span class="hljs-number">4</span>F<span class="hljs-number">7</span>P-NCP<span class="hljs-number">8</span>C-<span class="hljs-number">6</span>CQPT-MQHV<span class="hljs-number">9</span>-JXD<span class="hljs-number">2</span>M<br><span class="hljs-attribute">Visio</span> Professional <span class="hljs-number">2019</span>            <span class="hljs-number">9</span>BGNQ-K<span class="hljs-number">37</span>YR-RQHF<span class="hljs-number">2</span>-<span class="hljs-number">38</span>RQ<span class="hljs-number">3</span>-<span class="hljs-number">7</span>VCBB<br><span class="hljs-attribute">Visio</span> Standard <span class="hljs-number">2019</span>                <span class="hljs-number">7</span>TQNQ-K<span class="hljs-number">3</span>YQQ-<span class="hljs-number">3</span>PFH<span class="hljs-number">7</span>-CCPPM-X<span class="hljs-number">4</span>VQ<span class="hljs-number">2</span><br><br><span class="hljs-attribute">Office</span> Professional Plus <span class="hljs-number">2016</span>      XQNVK-<span class="hljs-number">8</span>JYDB-WJ<span class="hljs-number">9</span>W<span class="hljs-number">3</span>-YJ<span class="hljs-number">8</span>YR-WFG<span class="hljs-number">99</span><br><span class="hljs-attribute">Office</span>  Standard <span class="hljs-number">2016</span>              JNRGM-WHDWX-FJJG<span class="hljs-number">3</span>-K<span class="hljs-number">47</span>QV-DRTFM<br><span class="hljs-attribute">Project</span>  Professional <span class="hljs-number">2016</span>         YG<span class="hljs-number">9</span>NW-<span class="hljs-number">3</span>K<span class="hljs-number">39</span>V-<span class="hljs-number">2</span>T<span class="hljs-number">3</span>HJ-<span class="hljs-number">93</span>F<span class="hljs-number">3</span>Q-G<span class="hljs-number">83</span>KT<br><span class="hljs-attribute">Project</span>  Standard <span class="hljs-number">2016</span>             GNFHQ-F<span class="hljs-number">6</span>YQM-KQDGJ-<span class="hljs-number">327</span>XX-KQBVC<br><span class="hljs-attribute">Visio</span>  Professional <span class="hljs-number">2016</span>           PD<span class="hljs-number">3</span>PC-RHNGV-FXJ<span class="hljs-number">29</span>-<span class="hljs-number">8</span>JK<span class="hljs-number">7</span>D-RJRJK<br><span class="hljs-attribute">Visio</span>  Standard <span class="hljs-number">2016</span>               <span class="hljs-number">7</span>WHWN-<span class="hljs-number">4</span>T<span class="hljs-number">7</span>MP-G<span class="hljs-number">96</span>JF-G<span class="hljs-number">33</span>KR-W<span class="hljs-number">8</span>GF<span class="hljs-number">4</span><br></code></pre></td></tr></table></figure><h3 id="激活windows"><a href="#激活windows" class="headerlink" title="激活windows"></a>激活windows</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">查看系统版本<br>wmic os get caption  <span class="hljs-comment"># VL版本不需要添加密钥</span><br>安装密钥，需要使用对应系统版本的激活密钥（GVLK）<br>slmgr <span class="hljs-string">/ipk</span> W269N-WFGWX-YVC9B-4J6C9-T83GX<br>服务器<br>slmgr <span class="hljs-string">/skms</span> kms.sakura1943.top<br>激活系统<br>slmgr <span class="hljs-string">/ato</span><br></code></pre></td></tr></table></figure><h3 id="Office激活"><a href="#Office激活" class="headerlink" title="Office激活"></a>Office激活</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">切换至 office 安装目录（依据个人安装路径）<br><span class="hljs-keyword">cd</span> <span class="hljs-string">&quot;C:\Program Files\Microsoft Office\Office16&quot;</span><br>安装 Office GVLK 激活密钥<br>cscript ospp.vbs <span class="hljs-string">/inpkey</span><span class="hljs-function">:XQNVK-8JYDB-WJ9W3-YJ8YR-WFG99</span>  <span class="hljs-comment">## 同上，vl版本不需要</span><br>执行注册 KMS 服务器<br>cscript ospp.vbs <span class="hljs-string">/sethst</span><span class="hljs-function">:kms.sakura1943.top</span><br>激活 OFFICE<br>cscript ospp.vbs <span class="hljs-string">/act</span><br></code></pre></td></tr></table></figure><h3 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h3>]]></content>
    
    
    <categories>
      
      <category>KMS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>KMS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux开机跳过GRUB引导菜单选项(安静启动)</title>
    <link href="/2021/05/20/grub-quite/"/>
    <url>/2021/05/20/grub-quite/</url>
    
    <content type="html"><![CDATA[<h3 id="修改grub配置文件-非引导信息文件"><a href="#修改grub配置文件-非引导信息文件" class="headerlink" title="修改grub配置文件(非引导信息文件)"></a>修改grub配置文件(非引导信息文件)</h3><figure class="highlight gradle"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs gradle">vim <span class="hljs-regexp">/etc/</span><span class="hljs-keyword">default</span>/grub<br></code></pre></td></tr></table></figure><p>  修改相关内容为以下内容(没有的选项另起一行加入即可)：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">GRUB_TIMEOUT</span>=<span class="hljs-number">0</span><br><span class="hljs-attr">GRUB_HIDDEN_TIMEOUT</span>=<span class="hljs-number">0</span><br><span class="hljs-attr">GRUB_HIDDEN_TIMEOUT_QUIET</span>=<span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="更新grub引导信息"><a href="#更新grub引导信息" class="headerlink" title="更新grub引导信息"></a>更新grub引导信息</h3><p>  大部分发行版grub包名为grub2,则输入以下内容</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">grub2-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub2/grub.cfg<br></code></pre></td></tr></table></figure><p>  部分发行版输入grub2会找不到目标，则可能为grub(不带版本号的小尾巴)，则输入以下内容</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">grub-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub/grub.cfg<br></code></pre></td></tr></table></figure><h3 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h3><p>  输入<code>reboot</code>重启</p><h3 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h3>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>GRUB</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>GRUB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linux 安装</title>
    <link href="/2021/05/20/Arch-Linux-install/"/>
    <url>/2021/05/20/Arch-Linux-install/</url>
    
    <content type="html"><![CDATA[<h2 id="Arch-Linux安装"><a href="#Arch-Linux安装" class="headerlink" title="Arch Linux安装"></a>Arch Linux安装</h2><blockquote><p>安装前的准备工作：</p></blockquote><figure class="highlight less"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><pre><code class="hljs less"><span class="hljs-selector-tag">1</span>.确认分区类型(GPT或MBR)<br><span class="hljs-selector-tag">2</span>.留出足够空间给予<span class="hljs-selector-tag">Arch</span> <span class="hljs-selector-tag">Linux</span> 安装(建议<span class="hljs-number">50</span>GB以上)<br><span class="hljs-selector-tag">3</span>.目前的主分区不超过 <span class="hljs-selector-tag">2</span>个，多余的建议转化为逻辑分区(使用第三方磁盘工具转化，这里建议用DiskGenius)<br><span class="hljs-selector-tag">4</span>.制作安装引导介质（比如<span class="hljs-selector-tag">U</span>盘）<br></code></pre></td></tr></table></figure><h2 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h2><h3 id="1-验证启动模式"><a href="#1-验证启动模式" class="headerlink" title="1.验证启动模式"></a>1.验证启动模式</h3><p>  如果是主板支持UEFI模式且使用GUID(GPT)分区表，建议通过此方式验证是否启动该模式(嫌麻烦可以跳过此步骤)<br><code>ls /sys/firmware/efi/efivars</code></p><h3 id="2-查看网络接口是否开启"><a href="#2-查看网络接口是否开启" class="headerlink" title="2.查看网络接口是否开启"></a>2.查看网络接口是否开启</h3><p><code>ip link</code></p><h3 id="3-使用iwctl-WiFi-或者-有线联网"><a href="#3-使用iwctl-WiFi-或者-有线联网" class="headerlink" title="3.使用iwctl(WiFi) 或者 有线联网"></a>3.使用<code>iwctl(WiFi)</code> 或者 有线联网</h3><p>  验证是否连接成功<br>  iwctl无线连接:<br>  输入<code>iwctl</code> 回车，进入iwd中</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean">[iwd]# device list #列出设备列表<br></code></pre></td></tr></table></figure><p>后面用device代表你的设备</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmake">如果设备状态为<span class="hljs-keyword">off</span>,输入 quit 退出 iwd<br>再输入 rfkill unblock wifi 即可<br></code></pre></td></tr></table></figure><p>重新输入 iwctl 进入iwd</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs csharp">[<span class="hljs-meta">iwd</span>]<span class="hljs-meta"># station device scan #连接设备</span><br>[<span class="hljs-meta">iwd</span>]<span class="hljs-meta"># station device get-networks #列出附近的wifi列表</span><br>[<span class="hljs-meta">iwd</span>]<span class="hljs-meta"># station device connect SSID</span><br><span class="hljs-meta">#这里的SSID指wifi的ID，如果wifi有密码，它会提示输入</span><br>密码，输入密码的时候可能看不见，不会有字符和提示，不用<br>担心，回车即可。自此，wifi连接成功,输入 quit 退出iwd<br></code></pre></td></tr></table></figure><p>有线连接:</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">默认不需要进行操作<br></code></pre></td></tr></table></figure><p>检查网络状况:</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-built_in">ping</span> www.baidu.com  <span class="hljs-meta">## 有显示网络延迟，且不高，即正常，然后按Ctrl+C中止。</span><br></code></pre></td></tr></table></figure><h3 id="4-更新系统时间"><a href="#4-更新系统时间" class="headerlink" title="4.更新系统时间"></a>4.更新系统时间</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">timedatectl</span> <span class="hljs-built_in">set-ntp</span> <span class="hljs-string">true</span> <span class="hljs-comment">#更新系统时间</span><br><span class="hljs-string">timedatectl</span> <span class="hljs-string">status</span> <span class="hljs-comment">#检查服务状态</span><br><span class="hljs-string">hwclock</span> <span class="hljs-built_in">--systohc保存时间</span><br></code></pre></td></tr></table></figure><h3 id="5-更换国内软件源加快下载速度"><a href="#5-更换国内软件源加快下载速度" class="headerlink" title="5.更换国内软件源加快下载速度"></a>5.更换国内软件源加快下载速度</h3><p>  安装文本编辑器，如nano 或者vim 执行</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">nano</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span><br><span class="hljs-comment">or</span><br><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">vim</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span><br><span class="hljs-comment">or</span> <span class="hljs-comment">others</span><br></code></pre></td></tr></table></figure><p>  打开文本，并添加国内镜像源</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">nano <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br></code></pre></td></tr></table></figure><p>  把自带国家名和软件源删除(用剪切Ctrl+K删除更快) 然后添加软件源 这里以网易开源镜像(163)和北京外国语学院(bfsu)站为例</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">网易:<br>Server = http:<span class="hljs-regexp">//mi</span>rrors.<span class="hljs-number">163</span>.com<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>北京外国语学院:<br>Server = https:<span class="hljs-regexp">//mi</span>rrors.bfsu.edu.cn<span class="hljs-regexp">/$repo/</span>os/<span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>按<code>Ctrl+X</code>回车，输入Y回车确认保存并退出</p><p>更新同步:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -Sy</span><br></code></pre></td></tr></table></figure><h3 id="6-开始分区"><a href="#6-开始分区" class="headerlink" title="6.开始分区"></a>6.开始分区</h3><p>  输入fdisk -l回车查看所要安装的硬盘的路径，我这里以/dev/sda为例<br>  从先前准备的剩余空间上建立分区<br>  分区示例<br>  使用fdisk分区</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">fdisk <span class="hljs-regexp">/dev/</span>sda<br></code></pre></td></tr></table></figure><p>  进入fdisk后如下表建立，详细方法详见百度，或者谷歌拍照翻译，或者点击此处Arch官方wiki 使用fdisk分区<br>格式化分区：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">例 GPT:<br><br>mkfs.fat -F32 <span class="hljs-regexp">/dev/</span>sda1<br>mkfs.ext4 <span class="hljs-regexp">/dev/</span>sda2<br>mkswap <span class="hljs-regexp">/dev/</span>sda3<br><br>MBR:<br>mkfs.ext4 <span class="hljs-regexp">/dev/</span>sda1<br>mkswap <span class="hljs-regexp">/dev/</span>sda2<br></code></pre></td></tr></table></figure><p>挂载分区</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">例 GPT:<br>mkdir <span class="hljs-regexp">/mnt/</span>boot<br>mount <span class="hljs-regexp">/dev/</span>sda1 <span class="hljs-regexp">/mnt/</span>boot<br>swapon <span class="hljs-regexp">/dev/</span>sda3<br>mount <span class="hljs-regexp">/dev/</span>sda2 /mnt<br><br>MBR:<br>mount <span class="hljs-regexp">/dev/</span>sda1 /mnt<br>swapon <span class="hljs-regexp">/dev/</span>sda2<br></code></pre></td></tr></table></figure><h3 id="7-安装必须的软件包"><a href="#7-安装必须的软件包" class="headerlink" title="7.安装必须的软件包"></a>7.安装必须的软件包</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">pacstrap /mnt <span class="hljs-keyword">base</span> <span class="hljs-keyword">base</span>-devel linux linux-firmware nano vim   <span class="hljs-meta"># nano与vim二选一或者都安装，亦或者其他文本编辑器</span><br></code></pre></td></tr></table></figure><h3 id="8-配置系统"><a href="#8-配置系统" class="headerlink" title="8.配置系统"></a>8.配置系统</h3><p>  生产fstab文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">genfstab -U <span class="hljs-regexp">/mnt &gt; /m</span>nt<span class="hljs-regexp">/etc/</span>fstab<br></code></pre></td></tr></table></figure><p>  建议检查下/mnt/etc/fstab文件是否正确</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/mnt/</span>etc/fstab<br></code></pre></td></tr></table></figure><h3 id="9-进入系统"><a href="#9-进入系统" class="headerlink" title="9.进入系统"></a>9.进入系统</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">arch-chroot <span class="hljs-string">/mnt</span><br></code></pre></td></tr></table></figure><h3 id="10-设置时区"><a href="#10-设置时区" class="headerlink" title="10.设置时区"></a>10.设置时区</h3><p>  以上海为例，使用软链接将配置文件链接为<code>/etc/localtime</code></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ln -sf <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/zoneinfo/</span>Asia<span class="hljs-regexp">/Shanghai /</span>etc/localtime<br></code></pre></td></tr></table></figure><p>  运行hwclock保存时间配置</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">hwclock <span class="hljs-comment">--systhoc</span><br></code></pre></td></tr></table></figure><h3 id="11-创建本地用户"><a href="#11-创建本地用户" class="headerlink" title="11.创建本地用户"></a>11.创建本地用户</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">useradd -m -G wheel -s <span class="hljs-regexp">/bin/</span>bash sakura(以用户名sakura为例)<br></code></pre></td></tr></table></figure><p>  设置帐号密码</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">passwd</span> sakura （回车后输入密码不会显示，盲打就行）<br>passwd root <span class="hljs-comment"># 意在给root用户设置密码</span><br></code></pre></td></tr></table></figure><h3 id="12-本地化配置-（中文）"><a href="#12-本地化配置-（中文）" class="headerlink" title="12.本地化配置 （中文）###"></a>12.本地化配置 （中文）###</h3><p>  编辑/etc/locale.gen</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">nano <span class="hljs-regexp">/etc/</span>locale.gen<br></code></pre></td></tr></table></figure><p>  往下翻，找到</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">en_US</span>.UTF-<span class="hljs-number">8</span><br><span class="hljs-attribute">zh_CN</span>.UTF-<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><p>  把这些前面的#号去掉<br>  按<code>Ctrl+X</code>回车，输入Y回车确认保存并退出<br>  然后输入<code>locale-gen</code>回车<br>  编辑/etc/locale.conf</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">nano <span class="hljs-regexp">/etc/</span>locale.conf<br></code></pre></td></tr></table></figure><p>  添加内容</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">LANG</span>=zh_CN.UTF-<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><p>  按<code>Ctrl+X</code>回车，输入Y回车确认保存并退出</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">su</span> root  <span class="hljs-comment"># 这一步是返回root用户操作</span><br></code></pre></td></tr></table></figure><p>  安装中文字体</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">pacman -Sy ttf-dejavu noto-<span class="hljs-built_in">fonts</span> noto-<span class="hljs-built_in">fonts</span>-extra noto-<span class="hljs-built_in">fonts</span>-cjk noto-<span class="hljs-built_in">fonts</span>-emoji --needed --noconfirm<br></code></pre></td></tr></table></figure><p>  亦或者从windows下的fonts文件夹拷贝字体，复制到/usr/share/fonts<br>cp -r 你的字体路径 /usr/share/fonts</p><h3 id="13-安装grub-引导"><a href="#13-安装grub-引导" class="headerlink" title="13.安装grub 引导"></a>13.安装grub 引导</h3><p>  安装grub os-prober(系统探针）ntfs-3g(ntfs分区检测用的，检查你的windows系统用) efibootmgr(gpt分区表用户使用)</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">grub</span> <span class="hljs-comment">os</span><span class="hljs-literal">-</span><span class="hljs-comment">prober</span> <span class="hljs-comment">ntfs</span><span class="hljs-literal">-</span><span class="hljs-comment">3g</span> <span class="hljs-comment">efibootmgr</span> --<span class="hljs-comment">noconfirm</span> --<span class="hljs-comment">needed</span><br></code></pre></td></tr></table></figure><p>  编辑/etc/default/grub</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">打开<span class="hljs-regexp">/etc/</span>default/grub<br>找到<span class="hljs-comment">#GURB_DISABLE_OS_PROBER=false</span><br>把<span class="hljs-comment">#号去掉</span><br></code></pre></td></tr></table></figure><p>  按<code>Ctrl+X</code>回车，输入Y回车确认保存并退出<br>  安装grub到指定硬盘</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">MBR分区表<br>  grub-install <span class="hljs-attribute">--target</span>=i386-pc /dev/sda(这里的磁盘路径看个人情况，我的是sda)<br>GPT分区表<br>  grub-install <span class="hljs-attribute">--target</span>=x86_64-efi <span class="hljs-attribute">--efi-directory</span>=/boot <span class="hljs-attribute">--bootloader-id</span>=GRUB<br></code></pre></td></tr></table></figure><p>  生成grub.cfg配置文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">grub-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub/grub.cfg<br></code></pre></td></tr></table></figure><h3 id="14-安装图像界面"><a href="#14-安装图像界面" class="headerlink" title="14.安装图像界面"></a>14.安装图像界面</h3><p>  这里以kde为例，常见的还有xfce4 gnome等， kde相较于其他桌面环境更易于美化，个人比较推荐<br>  安装 xorg， kde(plasma)，kde配套软件，sddm 图像管理器</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">pacman -Sy xorg plasma kde-applications(kde-applications可自行选择部分安装，全部安装占用较大) sddm <span class="hljs-comment">--noconfirm -needed</span><br></code></pre></td></tr></table></figure><p>  设置sddm服务开机启动</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">systemctl <span class="hljs-builtin-name">enable</span> sddm<br></code></pre></td></tr></table></figure><p>  安装 网络管理器 工具</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">networkmanager</span> --<span class="hljs-comment">noconfirm</span> --<span class="hljs-comment">needed</span><br></code></pre></td></tr></table></figure><p>  并设置服务开机启动</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">systemctl <span class="hljs-builtin-name">enable</span> NetworkManager<br></code></pre></td></tr></table></figure><h3 id="15-给普通用户以权限"><a href="#15-给普通用户以权限" class="headerlink" title="15.给普通用户以权限"></a>15.给普通用户以权限</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">nano /etc/sudoers<br>进入后<br>(以sakura 为例)<br>在root <span class="hljs-keyword">ALL</span>=(<span class="hljs-keyword">ALL</span>) <span class="hljs-keyword">ALL</span>下面添加sakura <span class="hljs-keyword">ALL</span>=(<span class="hljs-keyword">ALL</span>) <span class="hljs-keyword">ALL</span><br>## Uncomment <span class="hljs-keyword">to</span> allow members <span class="hljs-keyword">of</span> <span class="hljs-keyword">group</span> wheel <span class="hljs-keyword">to</span> <span class="hljs-keyword">execute</span> <span class="hljs-keyword">any</span> command<br>#%wheel <span class="hljs-keyword">ALL</span>=(<span class="hljs-keyword">ALL</span>) <span class="hljs-keyword">ALL</span><br>将wheel 前的#去除<br></code></pre></td></tr></table></figure><p>  按<code>Ctrl+X</code>回车，输入Y回车确认保存并退出</p><h3 id="16-添加archlinuxcn源，个人推荐163-网易-和北京外国语学院-bfsu-，较稳定"><a href="#16-添加archlinuxcn源，个人推荐163-网易-和北京外国语学院-bfsu-，较稳定" class="headerlink" title="16.添加archlinuxcn源，个人推荐163(网易)和北京外国语学院(bfsu)，较稳定"></a>16.添加archlinuxcn源，个人推荐163(网易)和北京外国语学院(bfsu)，较稳定</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">nano <span class="hljs-regexp">/etc/</span>pacman.conf<br></code></pre></td></tr></table></figure><p>  末尾添加</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">[archlinuxcn]<br>Server = http:<span class="hljs-regexp">//mi</span>rrors.<span class="hljs-number">163</span>.com<span class="hljs-regexp">/archlinux-cn/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>  或者</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">[archlinuxcn]<br>Server = https:<span class="hljs-regexp">//mi</span>rrors.bfsu.edu.cn<span class="hljs-regexp">/archlinuxcn/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><p>  打开multilib</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#[multilib]</span><br>Include = <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br>将<span class="hljs-comment">#号去除</span><br>按Ctrl+X回车，输入Y回车确认保存并退出<br></code></pre></td></tr></table></figure><p>  更新并安装archlinuxcn-keyring</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Syu</span><br><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">archlinuxcn</span><span class="hljs-literal">-</span><span class="hljs-comment">keyring</span> --<span class="hljs-comment">noconfirm</span> --<span class="hljs-comment">needed</span><br></code></pre></td></tr></table></figure><h3 id="17-卸载vesa显卡驱动，并安装对于显卡驱动"><a href="#17-卸载vesa显卡驱动，并安装对于显卡驱动" class="headerlink" title="17.卸载vesa显卡驱动，并安装对于显卡驱动"></a>17.卸载vesa显卡驱动，并安装对于显卡驱动</h3><p>  以intel为例，其他显卡自行百度arch官方wiki<br>  <a href="https://wiki.archlinux.org/index.php/ATI_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">AMD/ATI显卡安装与配置</a>    <a href="https://wiki.archlinux.org/index.php/NVIDIA_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">NVIDIA显卡的安装与配置</a></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pacman</span> -R xf<span class="hljs-number">86</span>-video-vesa<br><span class="hljs-attribute">pacman</span> -Sy xf<span class="hljs-number">86</span>-video-intel --needed --noconfirm<br></code></pre></td></tr></table></figure><h3 id="18-安装cpu对应的ucode"><a href="#18-安装cpu对应的ucode" class="headerlink" title="18.安装cpu对应的ucode"></a>18.安装cpu对应的ucode</h3><p>  amd</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span> <span class="hljs-comment">amd</span><span class="hljs-literal">-</span><span class="hljs-comment">ucode</span><br></code></pre></td></tr></table></figure><p>  intel</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span> <span class="hljs-comment">intel</span><span class="hljs-literal">-</span><span class="hljs-comment">ucode</span><br></code></pre></td></tr></table></figure><h3 id="18-重启进桌面"><a href="#18-重启进桌面" class="headerlink" title="18.重启进桌面"></a>18.重启进桌面</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">reboot</span><br></code></pre></td></tr></table></figure><h3 id="19-中文输入法"><a href="#19-中文输入法" class="headerlink" title="19.中文输入法"></a>19.中文输入法</h3><p>  打开终端</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> pacman -Sy fcitx<span class="hljs-number">5</span>-im fcitx<span class="hljs-number">5</span>-chinese-addons -needed --noconfirm<br><span class="hljs-attribute">sudo</span> nano ~/.pam_environment<br></code></pre></td></tr></table></figure><p>  添加</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">GTK_IM_MODULE <span class="hljs-attribute">DEFAULT</span>=fcitx<br>QT_IM_MODULE  <span class="hljs-attribute">DEFAULT</span>=fcitx<br>XMODIFIERS    <span class="hljs-attribute">DEFAULT</span>=\@im=fcitx<br>INPUT_METHOD  <span class="hljs-attribute">DEFAULT</span>=fcitx<br>SDL_IM_MODULE <span class="hljs-attribute">DEFAULT</span>=fcitx<br>GLFW_IM_MODULE <span class="hljs-attribute">DEFAULT</span>=ibus<br></code></pre></td></tr></table></figure><p>按<code>Ctrl+X</code>回车，输入Y回车确认保存并退出</p><h3 id="20-浏览器"><a href="#20-浏览器" class="headerlink" title="20.浏览器"></a>20.浏览器</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span> <span class="hljs-comment">firefox</span> <span class="hljs-literal">-</span><span class="hljs-comment">firefox</span><span class="hljs-literal">-</span><span class="hljs-comment">i18n</span><span class="hljs-literal">-</span><span class="hljs-comment">zh</span><span class="hljs-literal">-</span><span class="hljs-comment">cn</span><br></code></pre></td></tr></table></figure><h3 id="21-安装yay-或者paru"><a href="#21-安装yay-或者paru" class="headerlink" title="21.安装yay(或者paru)"></a>21.安装yay(或者paru)</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">yay</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span><br><span class="hljs-comment">或者</span><br><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">paru</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span><br></code></pre></td></tr></table></figure><h3 id="22-安装触控板驱动"><a href="#22-安装触控板驱动" class="headerlink" title="22.安装触控板驱动"></a>22.安装触控板驱动</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> <span class="hljs-comment">xf86</span><span class="hljs-literal">-</span><span class="hljs-comment">input</span><span class="hljs-literal">-</span><span class="hljs-comment">synaptics</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span><br></code></pre></td></tr></table></figure><p>  指定所使用的触摸板驱动</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ln -s <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/X11/</span>xorg.conf.d<span class="hljs-regexp">/70-synaptics.conf /</span>etc<span class="hljs-regexp">/X11/</span>xorg.conf.d/<br></code></pre></td></tr></table></figure><p>  可能文件在 <code>/usr/share/X11/xorg.conf.d/*</code> 目录下名称不同，建议到该目录下先确定文件名，然后操作</p><h3 id="23-安装用于手机mtp连接的包"><a href="#23-安装用于手机mtp连接的包" class="headerlink" title="23.安装用于手机mtp连接的包"></a>23.安装用于手机mtp连接的包</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">pacman</span> <span class="hljs-literal">-</span><span class="hljs-comment">Sy</span> --<span class="hljs-comment">needed</span> --<span class="hljs-comment">noconfirm</span> <span class="hljs-comment">gmtp</span> <span class="hljs-comment">mtpfs</span><br></code></pre></td></tr></table></figure><p>后续部署<br>后续部署工作详见ArchLinux官方General recommendations<br><a href="https://wiki.archlinux.org/index.php/General_recommendations_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/General_recommendations_(简体中文)</a><br>以及可能感兴趣的应用<br><a href="https://wiki.archlinux.org/index.php/List_of_applications_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">https://wiki.archlinux.org/index.php/List_of_applications_(简体中文)</a></p><h2 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h2>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Arch Linux</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
